{"version":3,"file":"stateful-decider.js","sourceRoot":"","sources":["../../../src/decider/stateful-decider.ts"],"names":[],"mappings":";;;AAAA,4CAA8D;AAE9D,yDAAqD;AAErD,MAAa,eAAgB,SAAQ,kCAAe;IAGhD,KAAK,CAAC,WAAW,CAAC,SAA6B,EAAE,aAAgC;QAC7E,IAAI,aAAa,EAAE;YACf,OAAO,CAAC,IAAI,CAAC,eAAe,GAAG,aAAa,CAAC,CAAC;SACjD;QAED,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACnB,MAAM,0CAA8B,CAAC,oBAAoB,EAAE,CAAC;SAC/D;QAED,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;YACjD,OAAO,CAAC,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SAChD;QAED,OAAO,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;IAC1F,CAAC;IAEO,eAAe,CAAC,SAA6B,EAAE,QAA0B;QAC7E,MAAM,aAAa,GAAW,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAE1D,OAAO,SAAS,CAAC,aAAa,GAAG,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;IACxD,CAAC;CACJ;AAxBD,0CAwBC","sourcesContent":["import { ProviderNotRegisteredException } from '../exception';\nimport type { AbstractProvider } from '../model';\nimport { AbstractDecider } from './abstract-decider';\n\nexport class StatefulDecider extends AbstractDecider {\n    private currentProvider?: AbstractProvider;\n\n    async getProvider(providers: AbstractProvider[], forceProvider?: AbstractProvider): Promise<AbstractProvider> {\n        if (forceProvider) {\n            return (this.currentProvider = forceProvider);\n        }\n\n        if (!providers.length) {\n            throw ProviderNotRegisteredException.noProviderRegistered();\n        }\n\n        if (!this.currentProvider || providers.length === 1) {\n            return (this.currentProvider = providers[0]);\n        }\n\n        return (this.currentProvider = this.getNextProvider(providers, this.currentProvider));\n    }\n\n    private getNextProvider(providers: AbstractProvider[], provider: AbstractProvider): AbstractProvider {\n        const providerIndex: number = providers.indexOf(provider);\n\n        return providers[providerIndex + 1] || providers[0];\n    }\n}\n"]}