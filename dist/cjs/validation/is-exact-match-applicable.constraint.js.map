{"version":3,"file":"is-exact-match-applicable.constraint.js","sourceRoot":"","sources":["../../../src/validation/is-exact-match-applicable.constraint.ts"],"names":[],"mappings":";;;;;;;;;AAAA,qDAAsD;AAEtD,oCAAwC;AAGjC,IAAM,gCAAgC,GAAtC,MAAM,gCAAgC;IACzC,QAAQ,CAAC,UAAmB,EAAE,IAAyB;QACnD,MAAM,CAAC,gBAAgB,EAAE,aAAa,CAAC,GAAQ,IAAI,CAAC,WAAW,CAAC;QAChE,MAAM,QAAQ,GAAkB,IAAI,CAAC,MAAc,CAAC,gBAAgB,CAAC,CAAC;QACtE,MAAM,KAAK,GAAY,IAAI,CAAC,MAAc,CAAC,aAAa,CAAC,CAAC;QAE1D,IAAI,CAAC,UAAU,EAAE;YACb,OAAO,IAAI,CAAC;SACf;QAED,IAAI,CAAC,QAAQ,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE;YAC3C,OAAO,IAAI,CAAC;SACf;QAED,IAAI,QAAQ,IAAI,oBAAY,CAAC,YAAY,KAAK,QAAQ,EAAE;YACpD,OAAO,KAAK,CAAC;SAChB;QAED,IAAI,KAAK,IAAI,KAAK,KAAK,CAAC,EAAE;YACtB,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,cAAc,CAAC,KAA0B;QACrC,OAAO,4IAA4I,CAAC;IACxJ,CAAC;CACJ,CAAA;AA5BY,gCAAgC;IAD5C,IAAA,qCAAmB,EAAC,EAAE,IAAI,EAAE,wBAAwB,EAAE,CAAC;GAC3C,gCAAgC,CA4B5C;AA5BY,4EAAgC","sourcesContent":["import { ValidatorConstraint } from 'class-validator';\nimport type { ValidationArguments, ValidatorConstraintInterface } from 'class-validator';\nimport { AccuracyEnum } from '../model';\n\n@ValidatorConstraint({ name: 'isExactMatchApplicable' })\nexport class IsExactMatchApplicableConstraint implements ValidatorConstraintInterface {\n    validate(exactMatch: boolean, args: ValidationArguments): boolean {\n        const [accuracyProperty, limitProperty]: any = args.constraints;\n        const accuracy: AccuracyEnum = (args.object as any)[accuracyProperty];\n        const limit: number = (args.object as any)[limitProperty];\n\n        if (!exactMatch) {\n            return true;\n        }\n\n        if (!accuracy && typeof limit === 'undefined') {\n            return true;\n        }\n\n        if (accuracy && AccuracyEnum.HOUSE_NUMBER !== accuracy) {\n            return false;\n        }\n\n        if (limit && limit === 1) {\n            return false;\n        }\n\n        return true;\n    }\n\n    defaultMessage(_args: ValidationArguments): string {\n        return 'Can be used only if accuracy is not specified or it is set to AccuracyEnum.HOUSE_NUMBER and if limit is not specified or it is more than 1';\n    }\n}\n"]}